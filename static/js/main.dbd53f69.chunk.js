(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{33:function(e,t,n){e.exports=n(45)},38:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(20),i=n.n(c),l=n(22),u=(n(38),n(12)),o=n(2),s=n(4),d=n(5),p=n(7),h=n(6),m=n(16),E=n(14),b=function(e,t){return{type:"USER",payload:{email:e,password:t}}},v=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(E.a)(a)),a.state={email:"",password:"",shouldRedirect:!1},a}return Object(d.a)(n,[{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(m.a)({},n,a))}},{key:"checkValidity",value:function(){var e=this.state,t=e.email;return!(e.password.length<6)&&!!/^[A-Z0-9._-]+@[A-Z0-9.-]+.[A-Z]{2,4}$/i.test(t)}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.email,a=t.password;(0,this.props.saveEmailAndPassword)(n,a),this.setState({shouldRedirect:!0})}},{key:"render",value:function(){return this.state.shouldRedirect?r.a.createElement(o.a,{to:"/carteira"}):r.a.createElement("form",{onSubmit:this.handleSubmit,autoComplete:"on"},r.a.createElement("input",{"data-testid":"email-input",placeholder:"Email",name:"email",id:"email",type:"text",onChange:this.handleChange}),r.a.createElement("input",{"data-testid":"password-input",placeholder:"Senha",name:"password",id:"password",type:"text",onChange:this.handleChange}),r.a.createElement("button",{type:"submit",disabled:!this.checkValidity()},"Entrar"))}}]),n}(a.Component),f=Object(u.b)(null,(function(e){return{saveEmailAndPassword:function(t,n){return e(b(t,n))}}}))(v),y=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("section",null,r.a.createElement(f,null))}}]),n}(a.Component),g=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.expenses;return r.a.createElement("header",null,r.a.createElement("span",{"data-testid":"email-field"},"Email: ".concat(t)),r.a.createElement("span",{"data-testid":"total-field"},"Despesa Total:",0===n.length?0:n.reduce((function(e,t){return e+t.value*t.exchangeRates[t.currency].ask}),0).toFixed(2)),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))}}]),n}(a.Component),j=Object(u.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(g),x=n(3),O=n(11),C=n.n(O),S=n(17),k=function(e){return{type:"SAVE_CURRENCIES",payload:{currencies:e}}},w=function(e){return{type:"SAVE_EXPENSES",payload:{expenses:e}}},D=function(e,t){return{type:"SAVE_EDITED_EXPENSES",payload:{expenseEdited:e,expenseId:t}}},I=function(){var e=Object(S.a)(C.a.mark((function e(){var t,n,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,a=Object.keys(n).filter((function(e){return"USDT"!==e})),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return t=e.sent,e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(s.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleEdit=a.handleEdit.bind(Object(E.a)(a));var r=a.props,c=r.expenses,i=r.editId,l=c.filter((function(e){return e.id===i}))[0],u=l.id,o=l.currency,d=l.value,p=l.description,h=l.tag,m=l.method;return a.state={id:u,value:d,currency:o,method:m,tag:h,description:p},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:t=e.sent,(0,this.props.saveCurrencyList)(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(m.a)({},n,a))}},{key:"handleEdit",value:function(e){e.preventDefault();var t=this.props,n=t.expenses,a=t.editId,r=t.saveEditedExpense,c=n.filter((function(e){return e.id===a})),i=this.state;r({id:i.id,description:i.description,tag:i.tag,method:i.method,currency:i.currency,value:i.value,exchangeRates:c[0].exchangeRates})}},{key:"renderMethodTagDescriptionEdit",value:function(){var e=this.state,t=e.description,n=e.tag,a=e.method;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de Pagamento:",r.a.createElement("select",{name:"method",id:"method",value:a,"data-testid":"method-input",onChange:this.handleChange},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{name:"tag",id:"tag",value:n,"data-testid":"tag-input",onChange:this.handleChange},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade"))),r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o:",r.a.createElement("input",{name:"description",value:t,"data-testid":"description-input",onChange:this.handleChange})))}},{key:"renderInputEdit",value:function(){var e=this.props.currencies,t=this.state,n=t.currency,a=t.value;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"value-input"},"Valor:",r.a.createElement("input",{name:"value",value:a,"data-testid":"value-input",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"currency"},"Moeda:",r.a.createElement("select",{name:"currency",id:"currency",value:n,"data-testid":"currency-input",onChange:this.handleChange},e.map((function(e){return r.a.createElement("option",{"data-testid":e,key:e},e)})))),this.renderMethodTagDescriptionEdit(),r.a.createElement("button",{type:"submit",onClick:this.handleEdit},"Editar despesa"))}},{key:"render",value:function(){return r.a.createElement("div",null,this.renderInputEdit())}}]),n}(a.Component),R=Object(u.b)((function(e){var t=e.wallet;return{currencies:t.currencies,expenses:t.expenses,edit:t.edit,editId:t.editId}}),(function(e){return{saveCurrencyList:function(t){return e(k(t))},saveExpense:function(t){return e(w(t))},saveEditedExpense:function(t){return e(D(t))}}}))(T),A=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(E.a)(a)),a.state={id:0,value:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",description:""},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(S.a)(C.a.mark((function e(){var t;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:t=e.sent,(0,this.props.saveCurrencyList)(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSubmit",value:function(){var e=Object(S.a)(C.a.mark((function e(t){var n,a,r,c,i,l,u,o,s,d,p;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state.id,a=this.state,r=a.value,c=a.currency,i=a.method,l=a.tag,u=a.description,o={id:n,value:r,currency:c,method:i,tag:l,description:u},e.next=6,F(c);case 6:s=e.sent,d=this.props.saveExpense,p=Object(x.a)(Object(x.a)({},o),{},{exchangeRates:s}),d(p),n+=1,this.setState({id:n,value:0,currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o",description:""}),document.getElementById("expenseForm").reset();case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(m.a)({},n,a))}},{key:"renderMethodTagDescription",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de Pagamento:",r.a.createElement("select",{name:"method",id:"method","data-testid":"method-input",onChange:this.handleChange},r.a.createElement("option",null,"Dinheiro"),r.a.createElement("option",null,"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",null,"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Tag:",r.a.createElement("select",{name:"tag",id:"tag","data-testid":"tag-input",onChange:this.handleChange},r.a.createElement("option",null,"Alimenta\xe7\xe3o"),r.a.createElement("option",null,"Lazer"),r.a.createElement("option",null,"Trabalho"),r.a.createElement("option",null,"Transporte"),r.a.createElement("option",null,"Sa\xfade"))),r.a.createElement("label",{htmlFor:"description-input"},"Descri\xe7\xe3o:",r.a.createElement("input",{name:"description","data-testid":"description-input",onChange:this.handleChange})))}},{key:"renderInput",value:function(){var e=this.props.currencies;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"value-input"},"Valor:",r.a.createElement("input",{name:"value","data-testid":"value-input",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"currency"},"Moeda:",r.a.createElement("select",{name:"currency",id:"currency","data-testid":"currency-input",onChange:this.handleChange},e.map((function(e){return r.a.createElement("option",{"data-testid":e,key:e},e)})))),this.renderMethodTagDescription(),r.a.createElement("button",{type:"submit",onClick:this.handleSubmit},"Adicionar despesa"))}},{key:"render",value:function(){var e=this.props.edit;return r.a.createElement("form",{id:"expenseForm"},e?r.a.createElement(R,null):this.renderInput())}}]),n}(a.Component),M=Object(u.b)((function(e){var t=e.wallet;return{currencies:t.currencies,expenses:t.expenses,edit:t.edit,editId:t.editId}}),(function(e){return{saveCurrencyList:function(t){return e(k(t))},saveExpense:function(t){return e(w(t))},saveEditedExpense:function(t){return e(D(t))}}}))(A),_=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"renderHeadForm",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")))}},{key:"render",value:function(){var e=this.props,t=e.expenses,n=e.deleteExpense,a=e.editExpense;return r.a.createElement("table",{className:"expensesTable"},this.renderHeadForm(),r.a.createElement("tbody",null,t.length>0&&t.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,e.value),r.a.createElement("td",null,e.exchangeRates[e.currency].name),r.a.createElement("td",null,parseFloat(e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,(e.value*e.exchangeRates[e.currency].ask).toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"edit-btn",onClick:function(){return a(e.id)}},"Editar"),r.a.createElement("button",{type:"button","data-testid":"delete-btn",onClick:function(){return n(e.id)}},"Excluir")))}))))}}]),n}(a.Component),P=Object(u.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:"DELETE_EXPENSES",payload:{expenseId:e}}}(t))},editExpense:function(t){return e(function(e){return{type:"EDIT_EXPENSES",payload:{expenseId:e}}}(t))}}}))(_),V=function(e){Object(p.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,"TrybeWallet",r.a.createElement(j,null),r.a.createElement(M,null),r.a.createElement(P,null))}}]),n}(r.a.Component);var N=function(){return r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",component:y}),r.a.createElement(o.b,{path:"/carteira",component:V}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var L=n(15),X=n(31),U=n(32),B={email:"",password:""};var W=n(23),z={currencies:[],expenses:[],edit:!1,editId:""};var Z=Object(L.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER":return Object(x.a)(Object(x.a)({},e),{},{email:t.payload.email,password:t.payload.password});default:return e}},wallet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"SAVE_CURRENCIES":return Object(x.a)(Object(x.a)({},e),{},{currencies:a.currencies});case"SAVE_EXPENSES":return Object(x.a)(Object(x.a)({},e),{},{expenses:[].concat(Object(W.a)(e.expenses),[a.expenses])});case"DELETE_EXPENSES":return Object(x.a)(Object(x.a)({},e),{},{expenses:Object(W.a)(e.expenses.filter((function(e){return e.id!==a.expenseId})))});case"EDIT_EXPENSES":return Object(x.a)(Object(x.a)({},e),{},{edit:!0,editId:a.expenseId});case"SAVE_EDITED_EXPENSES":return Object(x.a)(Object(x.a)({},e),{},{expenses:Object(W.a)(e.expenses.map((function(t){return t.id===e.editId?Object(x.a)({},a.expenseEdited):t}))),edit:!1,editId:""});default:return e}}}),H=Object(L.createStore)(Z,Object(X.composeWithDevTools)(Object(L.applyMiddleware)(U.a)));i.a.render(r.a.createElement(l.a,{basename:"/trybe-wallet"},r.a.createElement(u.a,{store:H},r.a.createElement(N,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.dbd53f69.chunk.js.map